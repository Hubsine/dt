{% trans_default_domain 'FOSUserBundle' %}

{% from 'MopaBootstrapBundle::flash.html.twig' import flash, advanced_flash %}
{% import 'DtUserBundle:Compte:macros.html.twig' as macros %}

{% if message is defined %}    
        {{ advanced_flash('success', message, '', true, false, '') }}    
{% endif %}

{% set sections =
{
    'userPassword': {
        'id': 'parameters-password',
        'title':  'layout.compte.password',
        'contentId': 'userParametersPasswordContent',
        'view': macros.userPassword(),
        'path': path( 'dt_user_parameters_edit', { 'id': app.user.id } )
    },
    'userEmail': {
        'id': 'parameters-email',
        'title':  'layout.compte.email',
        'contentId': 'userParametersEmailContent',
        'view': macros.userEmail(),
        'path': path( 'dt_user_parameters_edit', { 'id': app.user.id } )
    }
}
%}

{% for section in sections %}
    
<div class="section-anchor-js">
    <h3 class="page-header" id="{{ section.id }}">
        {{ section.title|trans({}, 'FOSUserBundle') }}
    </h3>
    
    <div id="{{ section.contentId }}">
        
        <div class="viewContent">
            
            {{ section.view }}

            <div>
                <button 
                    data-action="{{ section.path }}" 
                    data-container="{{ section.contentId }}"
                    class="updateFormToUpdateInAjax pull-right btn btn-danger">
                    {% trans %} layout.update {% endtrans %}
                </button>

            </div>
        </div>
                
        <div class="formContent hidden">
        </div>
    </div>
</div>
                    
{% endfor %}    
